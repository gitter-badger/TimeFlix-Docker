var __bind=function(a,b){return function(){return a.apply(b,arguments)}};!function(a){return this.FilmRoll=function(){function b(b){this.options=null!=b?b:{},this.rotateRight=__bind(this.rotateRight,this),this.rotateLeft=__bind(this.rotateLeft,this),this.resize=__bind(this.resize,this),this.moveRight=__bind(this.moveRight,this),this.moveLeft=__bind(this.moveLeft,this),this.configureWidths=__bind(this.configureWidths,this),this.configureSwipe=__bind(this.configureSwipe,this),this.configureScroll=__bind(this.configureScroll,this),this.configureLoad=__bind(this.configureLoad,this),this.configureHover=__bind(this.configureHover,this),this.clearScroll=__bind(this.clearScroll,this),this.options.container&&(this.div=a(this.options.container),this.div.length&&this.configure())}return b.prototype.configure=function(){var c;return this.children=this.div.children(),this.children.wrapAll('<div class="film_roll_wrapper"></div>'),this.children.wrapAll('<div class="film_roll_shuttle"></div>'),this.wrapper=this.div.find(".film_roll_wrapper"),this.shuttle=this.div.find(".film_roll_shuttle"),this.rotation=[],this.shuttle.width(this.options.shuttle_width?parseInt(this.options.shuttle_width,10):1e4),this.options.start_height&&this.wrapper.height(parseInt(this.options.start_height,10)),this.options.vertical_center&&this.shuttle.addClass("vertical_center"),this.options.no_css===!0||document.film_roll_styles_added||(a("<style type='text/css'> .film_roll_wrapper{display:block;text-align:center;float:none;position:relative;top:auto;right:auto;bottom:auto;left:auto;z-index:auto;width:100%;height:100%;margin:0 !important;padding:0 !important;overflow:hidden;} .film_roll_shuttle{text-align:left;float:none;position:relative;top:0;left:0;right:auto;bottom:auto;height:100%;margin:0 !important;padding:0 !important;z-index:auto;} .film_roll_shuttle.vertical_center:before{content:'';display:inline-block;height:100%;vertical-align:middle;margin-right:-0.25em;} .film_roll_child{position:relative;display:inline-block;*display:inline;vertical-align:middle;zoom:1;} .film_roll_prev,.film_roll_next{position:absolute;top:48%;left:15px;width:40px;height:40px;margin:-20px 0 0 0;padding:0;font-size:60px;font-weight:100;line-height:30px;color:white;text-align:center;background:#222;border:3px solid white;border-radius:23px;opacity:0.5} .film_roll_prev:hover,.film_roll_next:hover{color:white;text-decoration:none;opacity:0.9} .film_roll_next{left:auto;right:15px} .film_roll_pager{text-align:center;} .film_roll_pager a{width:5px;height:5px;border:2px solid #333;border-radius:5px;display:inline-block;margin:0 5px 0 0;transition:all 1s ease} .film_roll_pager a:hover{background:#666} .film_roll_pager a.active{background:#333} .film_roll_pager span{display:none} .film_roll_pager a,a.film_roll_prev,a.film_roll_next{-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;} </style>").appendTo("head"),document.film_roll_styles_added=!0),this.options.pager!==!1&&(this.pager=a('<div class="film_roll_pager">'),this.div.append(this.pager),this.children.each(function(b){return function(c,d){var e;return e=a("<a href='#' data-id='"+d.id+"'><span>"+(c+1)+"</span></a>"),b.pager.append(e),e.click(function(){return b.index=c,b.moveToIndex(b.index,"best",!0),!1})}}(this))),this.pager_links=this.div.find(".film_roll_pager a"),"scroll"===this.options.hover?(this.options.scroll=!1,this.hover_in=function(a){return function(){return clearTimeout(a.hover_timer),a.hover_timer=setTimeout(function(){return a.moveLeft(),a.configureScroll()},300)}}(this),this.hover_out=this.clearScroll):this.options.hover!==!1&&(this.hover_in=function(a){return function(){return clearTimeout(a.hover_timer),a.hover_timer=setTimeout(function(){return a.clearScroll()},300)}}(this),this.hover_out=this.configureScroll),this.options.hover!==!1&&(this.mouse_catcher=a('<div style="position:absolute; top:0; left: 0; height: 100%; width: 100%;" class="film_roll_mouse_catcher"></div>'),this.mouse_catcher.appendTo(this.wrapper).mousemove(function(a){return function(){return a.hover_in(),a.mouse_catcher.remove()}}(this))),c=null,this.children.each(function(b){return function(c,d){var e;return e=a(d),e.attr("data-film-roll-child-id",c),e.addClass("film_roll_child"),b.rotation.push(d)}}(this)),this.options.prev!==!1&&(this.options.prev&&this.options.next?this.prev=a(this.options.prev):(this.wrapper.append('<a class="film_roll_prev" href="#">&lsaquo;</a>'),this.prev=this.div.find(".film_roll_prev")),this.prev.click(function(a){return function(){return a.moveRight()}}(this))),this.options.next!==!1&&(this.options.next?this.next=a(this.options.next):(this.wrapper.append('<a class="film_roll_next" href="#">&rsaquo;</a>'),this.next=this.div.find(".film_roll_next")),this.next.click(function(a){return function(){return a.moveLeft()}}(this))),this.index=this.options.start_index||0,this.interval=this.options.interval||4e3,this.animation=this.options.animation||this.interval/4,this.easing=this.options.easing||b.default_easing,this.options.resize!==!1&&a(window).resize(function(a){return function(){return a.resize()}}(this)),this.options.configure_load?"function"==typeof this.options.configure_load?this.options.configure_load.apply(this,arguments):"number"==typeof this.options.configure_load?setTimeout(function(a){return function(){return a.configureLoad()}}(this),this.options.configure_load):this.configureLoad():a(window).load(this.configureLoad),this.options.swipe!==!1&&this.configureSwipe(),this.div.trigger(a.Event("film_roll:dom_ready")),this},b.prototype.bestDirection=function(b,c){return c||(c=a.inArray(b,this.rotation)),c<this.children.length/2?"right":"left"},b.prototype.cancelClick=function(b){return a(this).hasClass("fr-no-click")?(b.preventDefault(),!1):!0},b.prototype.childIndex=function(b){return a.inArray(b,this.children)},b.prototype.childWidth=function(b){var c;return c=this.childIndex(b),this.child_widths[c]||a(b).outerWidth(!0)},b.prototype.clearScroll=function(){return this.scrolled!==!1&&(clearInterval(this.timer),this.scrolled=!1),this},b.prototype.configureHover=function(){return this.div.hover(this.hover_in,this.hover_out),this.options.prev&&this.options.next?(this.prev.hover(this.hover_in,this.hover_out),this.next.hover(this.hover_in,this.hover_out)):void 0},b.prototype.configureLoad=function(){return this.configureWidths(),this.moveToIndex(this.index,"right",!0),"scroll"===this.options.hover?(this.options.scroll=!1,this.configureHover()):this.options.scroll!==!1&&(this.configureScroll(),this.options.hover!==!1)?this.configureHover():void 0},b.prototype.configureScroll=function(){return this.scrolled!==!0&&(this.timer=setInterval(function(a){return function(){return a.moveLeft()}}(this),this.interval),this.scrolled=!0),this},b.prototype.configureSwipe=function(){return"undefined"!=typeof a.fn.swipe?(this.div.swipe({swipeStatus:function(b){return function(c,d,e,f){var g,h;if("up"===e||"down"===e)return!1;if("start"===d){if(h=b.wrapper.width(),h>=b.real_width||1===b.children.length)return!1;b.was_scrolled=b.scrolled,b.scrolled&&b.clearScroll(),b.active_half=b.child_widths[b.index]/2,g=a.inArray(b.children[b.index],b.rotation),b.offscreen_left=parseInt(b.shuttle.css("left"),10),b.offscreen_right=b.marginRight(g)-(h-b.child_widths[b.index])/2,b.div.find("a").addClass("fr-no-click")}else"move"===d?"left"===e?(f>b.active_half&&(a(b.children[b.index]).removeClass("active"),b.index=(b.index+1)%b.children.length,a(b.children[b.index]).addClass("active"),b.active_half+=b.child_widths[b.index]),f>b.offscreen_right&&(b.offscreen_left=b.rotateLeft()+f,b.offscreen_right+=b.childWidth(b.rotation[b.rotation.length-1])),b.shuttle.css("left",b.offscreen_left-f)):(f>b.active_half&&(a(b.children[b.index]).removeClass("active"),b.index-=1,b.index<0&&(b.index=b.children.length-1),a(b.children[b.index]).addClass("active"),b.active_half+=b.child_widths[b.index]),f+b.offscreen_left>0&&(b.offscreen_left=b.rotateRight()-f),b.shuttle.css("left",b.offscreen_left+f)):("end"===d?b.moveToIndex(b.index,e):"cancel"===d&&b.moveToIndex(b.index,"right"===e?"left":"right"),b.was_scrolled&&b.configureScroll());return!0}}(this),excludedElements:"label, button, input, select, textarea, .noSwipe",allowPageScroll:"vertical"}),this.div.find("a").on("click",this.cancelClick)):void 0},b.prototype.configureWidths=function(){var b;return this.width=b=0,this.wrapper.css({height:"","min-height":0}),this.shuttle.width("").removeClass("film_roll_shuttle").addClass("film_roll_resizing"),this.children.width(""),this.div.trigger(a.Event("film_roll:resizing")),this.child_widths=[],this.options.height&&this.options.height.toString().match(/^\+/)?(this.options.height_padding=parseInt(this.options.height,10),this.options.height=null):this.options.height_padding=0,this.children.each(function(c){return function(d,e){var f,g,h;return f=a(e),f.width(f.outerWidth(!0)),h=f.outerWidth(!0),c.child_widths.push(h),c.width+=h,c.options.height||(g=f.outerHeight(!0),g>b&&(b=g)),e}}(this)),this.options.height?this.wrapper.height(this.options.height):(this.wrapper.height(""),this.wrapper.css("min-height",b+this.options.height_padding)),this.real_width=this.width,this.shuttle.width(2*this.real_width).removeClass("film_roll_resizing").addClass("film_roll_shuttle"),this},b.prototype.rotationIndex=function(b){return a.inArray(b,this.rotation)},b.prototype.marginLeft=function(a){var b,c,d,e,f,g;for(d=0,g=this.rotation,c=e=0,f=g.length;f>e;c=++e)b=g[c],a>c&&c>=0&&(d+=this.childWidth(b));return d},b.prototype.marginRight=function(a){var b,c,d,e,f,g,h;for(e=this.rotation.length-1,d=0,h=this.rotation,c=f=0,g=h.length;g>f;c=++f)b=h[c],c>a&&e>=c&&(d+=this.childWidth(b));return d},b.prototype.moveLeft=function(){return this.index=(this.index+1)%this.children.length,this.moveToIndex(this.index,"left",!0),!1},b.prototype.moveRight=function(){return this.index-=1,this.index<0&&(this.index=this.children.length-1),this.moveToIndex(this.index,"right",!0),!1},b.prototype.moveToChild=function(b){var c;return c=this.childIndex(a(b)[0]),c>-1?this.moveToIndex(c):void 0},b.prototype.moveToIndex=function(b,c,d){var e,f,g,h,i,j,k;if(null==d&&(d=!0),this.index=b,i=this.scrolled,this.clearScroll(),e=this.children[b],h=a.inArray(e,this.rotation),c&&"best"!==c||(c=this.bestDirection(e,h)),this.children.removeClass("active"),a(e).addClass("active").trigger(a.Event("film_roll:activate")),this.pager_links.removeClass("active"),a(this.pager_links[b]).addClass("active"),k=this.wrapper.width(),k<this.real_width&&this.children.length>1){if(j=(k-this.child_widths[b])/2,"right"===c)for(;0===h||this.marginLeft(h)<j;)this.rotateRight(),h=a.inArray(e,this.rotation);else for(;h===this.children.length-1||this.marginRight(h)<j;)this.rotateLeft(),h=a.inArray(e,this.rotation);g=-1*(this.marginLeft(h)-j),d?(f="moving_"+c,this.shuttle.addClass(f),this.div.trigger(a.Event("film_roll:moving")),this.shuttle.stop().animate({left:g},this.animation,this.easing,function(b){return function(){return b.shuttle.removeClass(f),b.div.trigger(a.Event("film_roll:moved"))}}(this))):(this.shuttle.css("left",g),this.div.trigger(a.Event("film_roll:moved")))}else this.shuttle.css("left",(k-this.width)/2);return i&&this.configureScroll(),this},b.prototype.resize=function(){return clearTimeout(this.resize_timer),this.resize_timer=setTimeout(function(b){return function(){var c;return c=b.scrolled,b.clearScroll(),c&&b.configureScroll(),b.configureWidths(),b.moveToIndex(b.index,"best"),b.div.trigger(a.Event("film_roll:resized"))}}(this),200),this},b.prototype.rotateLeft=function(){var a,b,c,d;return a=this.shuttle.css("left"),d=a?parseInt(a,10):0,b=this.rotation.shift(),c=d+this.childWidth(b),this.rotation.push(b),this.shuttle.css("left",c),this.shuttle.append(this.shuttle.children().first().detach()),c},b.prototype.rotateRight=function(){var a,b,c,d;return a=this.shuttle.css("left"),d=a?parseInt(a,10):0,b=this.rotation.pop(),c=d-this.childWidth(b),this.rotation.unshift(b),this.shuttle.css("left",c),this.shuttle.prepend(this.shuttle.children().last().detach()),c},b}(),this.FilmRoll.default_easing="swing"}(jQuery);